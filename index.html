<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åå­—ç”·å¨˜æŒ‡æ•°è§£æå™¨</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ­</text></svg>">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/pinyin@4.0.0/lib/umd/pinyin.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .rainbow-text {
            background: linear-gradient(90deg, #ef4444, #f97316, #eab308, #84cc16, #22c55e, #14b8a6, #06b6d4, #3b82f6, #8b5cf6, #d946ef);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .progress-bar-inner {
            transition: width 0.2s linear, background-color 0.2s linear;
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            20%, 60% { transform: translateX(-6px); }
            40%, 80% { transform: translateX(6px); }
        }
        .shake { animation: shake 0.5s; }
        @keyframes pop-in {
            0% { transform: scale(0.8); opacity: 0; }
            70% { transform: scale(1.1); opacity: 1; }
            100% { transform: scale(1); }
        }
        .pop-in { animation: pop-in 0.5s ease-out forwards; }
    </style>
</head>
<body class="bg-gray-900 text-white min-h-screen flex items-center justify-center p-4">
    <div class="w-full max-w-md mx-auto bg-gray-800 rounded-2xl shadow-2xl p-6 md:p-8 space-y-6">
        <!-- Header -->
        <div class="text-center">
            <h1 class="text-3xl font-bold rainbow-text">åå­—ç”·å¨˜æŒ‡æ•°è§£æå™¨</h1>
            <p class="text-gray-400 mt-2">è¾“å…¥ä¸€ä¸ªåå­—ï¼Œçœ‹çœ‹â€œç§‘å­¦â€çš„ç”·å¨˜æŒ‡æ•°ï¼</p>
            <p class="text-xs text-gray-500 mt-1">ï¼ˆçº¯å±å¨±ä¹ï¼Œè¯·å‹¿å½“çœŸï¼‰</p>
        </div>
        <!-- Input Form -->
        <div class="space-y-4">
            <input type="text" id="nameInput" placeholder="è¾“å…¥åå­—æˆ–ç½‘å" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500">
            <button id="calculateBtn" class="w-full bg-purple-600 hover:bg-purple-700 text-white font-bold py-3 px-4 rounded-lg transition transform hover:scale-105 active:scale-95">
                <span id="btnText">å¼€å§‹è®¡ç®—</span>
                <span id="btnSpinner" class="hidden animate-spin">â—</span>
            </button>
        </div>
        <!-- Result -->
        <div id="resultSection" class="hidden pt-6 space-y-4 text-center">
            <h2 class="text-xl font-semibold text-gray-300">è®¡ç®—ç»“æœ for "<span id="resultName" class="font-bold text-purple-400"></span>"</h2>
            <div class="relative w-full h-8 bg-gray-700 rounded-full overflow-hidden border-2 border-gray-600">
                <div id="progressBar" class="progress-bar-inner h-full rounded-full" style="width: 0%; background-color:#3b82f6;"></div>
                <span id="percentageText" class="absolute inset-0 flex items-center justify-center text-sm font-bold text-white opacity-0">0%</span>
            </div>
            <p id="resultMessage" class="text-lg font-medium text-gray-200 h-12 flex items-center justify-center"></p>
        </div>
    </div>
    <script>
        window.onload = function() {
            const nameInput = document.getElementById('nameInput');
            const calculateBtn = document.getElementById('calculateBtn');
            const btnText = document.getElementById('btnText');
            const btnSpinner = document.getElementById('btnSpinner');
            const resultSection = document.getElementById('resultSection');
            const resultName = document.getElementById('resultName');
            const progressBar = document.getElementById('progressBar');
            const percentageText = document.getElementById('percentageText');
            const resultMessage = document.getElementById('resultMessage');

            // å°†åå­—æ ‡å‡†åŒ–ä¸ºå°å†™æ‹¼éŸ³ï¼Œå»é™¤æ‰€æœ‰éå­—æ¯æ•°å­—å­—ç¬¦
            function normalizeName(name) {
                let processed = name.trim().toLowerCase();
                // å¦‚æœåŒ…å«ä¸­æ–‡å­—ç¬¦ï¼Œè½¬æ¢ä¸ºæ‹¼éŸ³
                if (/[ä¸€-é¾¥]/.test(processed)) {
                    processed = pinyin.pinyin(processed, { style: pinyin.STYLE_NORMAL }).flat().join('');
                }
                return processed.replace(/[^a-z0-9]/g, '');
            }

            // å‡çº§åçš„å¤æ‚è®¡ç®—é€»è¾‘
            function calculateScore(name) {
                // å¦‚æœåå­—ä¸ºç©ºï¼Œç›´æ¥è¿”å› 0
                if (!name) return 0;

                // å®šä¹‰ä¸€äº›"ä¼ªç§‘å­¦"çš„å­—æ¯æƒé‡
                const femboyLetters = { 'a': 10, 'i': 9, 'e': 8, 'o': 7, 'u': 6, 'y': 5, 'l': 4, 'm': 3 };
                const masculineLetters = { 'b': 10, 'k': 9, 'g': 8, 'd': 7, 'p': 6, 'z': 5, 'c': 4, 't': 3 };
                const baseScore = 50; // åŸºç¡€åˆ†ï¼Œä»50å¼€å§‹

                let totalScore = baseScore;
                let lengthBonus = name.length > 5 ? (name.length - 5) * 2 : 0; // åå­—è¶Šé•¿ï¼ŒåŠ åˆ†è¶Šå¤š
                let positionFactor = 0; // ä½ç½®åŠ æƒåˆ†

                // éå†åå­—ä¸­çš„æ¯ä¸ªå­—ç¬¦
                for (let i = 0; i < name.length; i++) {
                    const char = name[i];
                    // å­—æ¯ASCIIç çš„å¥‡å¶æ€§ä¹Ÿä¼šå½±å“ç»“æœ
                    const charCode = char.charCodeAt(0);

                    // æ ¹æ®é¢„è®¾æƒé‡å¢åŠ æˆ–å‡å°‘åˆ†æ•°
                    if (femboyLetters[char]) {
                        totalScore += femboyLetters[char] * (i + 1); // è¶Šé å‰æƒé‡è¶Šå¤§
                    } else if (masculineLetters[char]) {
                        totalScore -= masculineLetters[char] * (i + 1); // è¶Šé å‰æƒé‡è¶Šå¤§
                    }

                    // å¥‡å¶ä½ç½®çš„ç¥ç§˜åŠ æˆ
                    if (i % 2 === 0) {
                        positionFactor += 3;
                    } else {
                        positionFactor += 2;
                    }

                    // å¥‡å¶ASCIIç çš„ç„å­¦åŠ æˆ
                    if (charCode % 2 === 0) {
                        totalScore += 5;
                    } else {
                        totalScore -= 5;
                    }
                }

                // ç»¼åˆæ‰€æœ‰å› ç´ å¾—åˆ°æœ€ç»ˆåˆ†æ•°ï¼Œå¹¶è¿›è¡Œå½’ä¸€åŒ–åˆ° 0-100 èŒƒå›´
                const finalScore = (totalScore + lengthBonus + positionFactor) % 101;
                return Math.max(0, Math.min(100, finalScore));
            }

            // æ ¹æ®åˆ†æ•°è¿”å›ä¸åŒçš„ç»“æœä¿¡æ¯
            function getResultMessage(score) {
                const messages = {
                    0: ["å®Œå…¨æ²¡æœ‰ç”·å¨˜æ°”è´¨ï¼Œçº¯çˆ·ä»¬æ— ç–‘ï¼"],
                    10: ["æœ‰ç‚¹å¯çˆ±ç›´ç”·çš„æ„Ÿè§‰ï¼Œä½†ç¦»ç”·å¨˜è¿˜è¿œã€‚"],
                    40: ["å¼€å§‹æ˜¾éœ²ä¸­æ€§é£æ ¼ï¼Œç¨å¾®æœ‰ç‚¹ç”·å¨˜å‘³ã€‚"],
                    60: ["å¾ˆæœ‰æ½œè´¨ï¼åŒ–ä¸ªå¦†å°±èƒ½éª—è¿‡ä¸å°‘äººã€‚"],
                    75: ["èµ°åœ¨è·¯ä¸Šéƒ½å¯èƒ½è¢«å½“å¦¹å­ï¼ç”·å¨˜åŠ›çˆ†å‘ï¼"],
                    90: ["èŒä¸šç”·å¨˜çº§åˆ«ï¼Œæ°”è´¨æ‹¿æå¾—æ­»æ­»çš„ã€‚"],
                    100: ["å®Œç¾ç”·å¨˜ï¼ä½ å°±æ˜¯ä¼ªå¨˜ç•Œçš„å¤©èŠ±æ¿ï¼"]
                };
                if (score === 0) return messages[0][0];
                if (score <= 10) return messages[10][0];
                if (score <= 40) return messages[40][0];
                if (score <= 60) return messages[60][0];
                if (score <= 75) return messages[75][0];
                if (score <= 90) return messages[90][0];
                return messages[100][0];
            }

            // æ ¹æ®ç™¾åˆ†æ¯”è®¾ç½®è¿›åº¦æ¡é¢œè‰²
            function getProgressBarColor(percentage) {
                if (percentage < 25) return '#3b82f6'; // blue
                if (percentage < 50) return '#8b5cf6'; // purple
                if (percentage < 75) return '#ec4899'; // pink
                if (percentage < 90) return '#f59e0b'; // amber
                return '#ef4444'; // red
            }

            // å¤„ç†è®¡ç®—æŒ‰é’®ç‚¹å‡»
            function handleCalculation() {
                const name = nameInput.value;
                if (!name.trim()) {
                    nameInput.classList.add('shake');
                    setTimeout(() => nameInput.classList.remove('shake'), 500);
                    return;
                }
                btnText.classList.add('hidden');
                btnSpinner.classList.remove('hidden');
                calculateBtn.disabled = true;
                resultSection.classList.add('hidden');

                // æ¨¡æ‹Ÿè®¡ç®—å»¶è¿Ÿ
                setTimeout(() => {
                    const norm = normalizeName(name);
                    const score = calculateScore(norm);
                    displayResult(name, score);
                    btnText.classList.remove('hidden');
                    btnSpinner.classList.add('hidden');
                    calculateBtn.disabled = false;
                }, 800);
            }

            // æ˜¾ç¤ºè®¡ç®—ç»“æœ
            function displayResult(name, score) {
                resultName.textContent = name;
                resultSection.classList.remove('hidden');
                let current = 0;
                const interval = setInterval(() => {
                    progressBar.style.width = current + '%';
                    progressBar.style.backgroundColor = getProgressBarColor(current);
                    percentageText.textContent = current + '%';
                    percentageText.style.opacity = 1;
                    if (current >= score) {
                        clearInterval(interval);
                        percentageText.classList.add('pop-in');
                        resultMessage.textContent = getResultMessage(score);
                    } else {
                        current++;
                    }
                }, 20);
            }

            // ç»‘å®šäº‹ä»¶ç›‘å¬å™¨
            calculateBtn.addEventListener('click', handleCalculation);
            nameInput.addEventListener('keyup', e => { if (e.key === 'Enter') handleCalculation(); });
        }
    </script>
</body>
</html>
